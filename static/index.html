<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>PivotStream Studio</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="page">
      <header class="hero">
        <div class="hero-bar">
          <h1>PivotStream Studio</h1>
          <button id="themeToggle" class="ghost theme-toggle" type="button" aria-pressed="false">Dark mode</button>
        </div>
        <p>A friendly Rapid Serial Visual Presentation reader that keeps your focus centered. Paste text, pick a speed, and glide through words without eye strain.</p>
      </header>

      <div class="layout">
        <div class="main-stack">
          <section class="panel input-panel">
            <label class="label" for="inputText">Text input</label>
            <div
              id="inputText"
              class="text-input"
              contenteditable="true"
              role="textbox"
              aria-multiline="true"
              data-placeholder="Paste or type text here..."
            ></div>
            <div class="row">
              <button id="loadSample">Load sample text</button>
            <label class="file">
              <input id="epubFile" type="file" accept=".epub" />
              <span>Choose EPUB</span>
            </label>
            <button id="loadEpub">Load EPUB</button>
            <label class="file">
              <input id="pdfFile" type="file" accept=".pdf" />
              <span>Choose PDF</span>
            </label>
            <button id="loadPdf">Load PDF</button>
            <span id="parseSpinner" class="spinner is-hidden" aria-hidden="true"></span>
            <div class="status" id="parseStatus"></div>
          </div>
        </section>

          <section class="panel viewer">
            <div class="focus-window" aria-live="polite" aria-atomic="true">
              <span class="center-guide" aria-hidden="true"></span>
              <span id="left" class="left"></span>
              <span id="pivot" class="pivot"></span>
              <span id="right" class="right"></span>
            </div>
            <div class="meta">
              <span id="wordIndex">0 / 0</span>
              <button id="metaToggle" class="ghost meta-toggle" type="button">Words</button>
              <span id="playState">Idle</span>
            </div>
          </section>
        </div>

        <section class="panel side-panel">
          <div class="controls-panel">
            <div class="label">Speed</div>
            <div class="controls">
              <div class="slider-row">
                <input id="wpm" type="range" min="100" max="1600" step="10" value="300" aria-label="Words per minute" />
                <span id="wpmValue" aria-live="polite">300 WPM</span>
              </div>
              <div class="buttons">
                <button id="play" aria-label="Play">Play</button>
                <button id="pause" class="ghost" aria-label="Pause">Pause</button>
                <button id="resume" class="ghost" aria-label="Resume">Resume</button>
                <button id="restart" class="ghost" aria-label="Restart">Restart</button>
                <button id="stable" class="ghost" aria-label="Stabilize speed">Stable</button>
              </div>
              <div class="buttons">
                <button id="back10" class="ghost" aria-label="Back 10 words">&larr; 10 words</button>
                <button id="forward10" class="ghost" aria-label="Forward 10 words">10 words &rarr;</button>
              </div>
              <button id="shortcuts" class="ghost" type="button" aria-haspopup="dialog">Shortcuts</button>
            </div>
          </div>

          <div class="panel-divider" role="presentation"></div>

          <div class="chapters-panel">
            <div class="label" id="chapterLabel">Chapters</div>
            <div id="chapterList" class="chapter-list"></div>
            <div class="status" id="chapterStatus">No chapters loaded.</div>
          </div>
        </section>
      </div>

      <dialog id="shortcutsDialog" class="shortcuts-dialog" aria-labelledby="shortcutsTitle">
        <div class="shortcuts-header">
          <h2 id="shortcutsTitle">Keyboard shortcuts</h2>
          <button id="shortcutsClose" class="ghost" type="button" aria-label="Close shortcuts">Close</button>
        </div>
        <div class="shortcuts-list">
          <div><span>Space</span><span>Play / pause</span></div>
          <div><span>R</span><span>Restart</span></div>
          <div><span>J / L</span><span>Back / forward 10 words</span></div>
          <div><span>C</span><span>Toggle words / %</span></div>
          <div><span>S</span><span>Stabilize speed</span></div>
          <div><span>?</span><span>Open shortcuts</span></div>
        </div>
      </dialog>
    </div>

    <script src="app.js?v=20260126"></script>
  </body>
</html>
